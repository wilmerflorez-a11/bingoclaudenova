<!DOCTYPE html>
<html lang="es">
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>Juego | Bingo Claudenove</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/juego.css' %}">
</head>
<body>

    <div class="game-container">
        
        <!-- HEADER -->
        <header class="game-header">
            <div class="logo">BINGO-CLAUDENOVA</div>
            <div class="timer-container">
                <span>PR√ìXIMO N√öMERO EN</span>
                <div id="timer" class="pixel-font">00:10</div>
            </div>
            <div class="user-info">
                <div class="avatar">üë§</div>
                <span>{{ user.username }}</span>
            </div>
        </header>

        <!-- MAIN LAYOUT -->
        <main class="game-layout">
            
            <!-- LEFT PANEL: HISTORY & INFO -->
            <aside class="left-panel">
                <div class="panel-box history-box">
                    <h3>N√∫meros Cantados</h3>
                    <div class="last-ball-container">
                        <div id="current-ball" class="bingo-ball big-ball">--</div>
                        <span class="live-badge">EN VIVO</span>
                    </div>
                    <div id="ball-history" class="ball-history-grid">
                        <!-- Balls will be injected here -->
                    </div>
                </div>

                <div class="panel-box prize-box">
                    <h3>Premio Actual</h3>
                    <div class="prize-info">
                        <div class="prize-icon">üèÜ</div>
                        <div>
                            <h4>L√çNEA HORIZONTAL</h4>
                            <p>Completa cualquier l√≠nea para ganar</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- CENTER PANEL: BINGO CARD -->
            <section class="center-panel">
                <div class="bingo-card-container">
                    <div class="bingo-header">
                        <div class="col-header">B</div>
                        <div class="col-header">I</div>
                        <div class="col-header">N</div>
                        <div class="col-header">G</div>
                        <div class="col-header">O</div>
                    </div>
                    <div id="bingo-grid" class="bingo-grid">
                        <!-- Grid generated by JS -->
                    </div>
                </div>

                <button id="btn-bingo" class="btn-bingo pixel-font" disabled>¬°BINGO!</button>
            </section>

            <!-- RIGHT PANEL: CHAT -->
            <aside class="right-panel">
                <div class="panel-box chat-box">
                    <h3>Chat del Juego</h3>
                    <div id="chat-messages" class="chat-messages">
                        <!-- Messages -->
                    </div>
                    <div class="chat-input-area">
                        <input type="text" id="chat-input" placeholder="Escribe un mensaje...">
                        <button id="btn-send">‚û§</button>
                    </div>
                </div>
            </aside>

        </main>

        <div class="game-footer">
            PARTIDA #{{ partida_id }}
        </div>

    </div>

    <script>
        const WS_URL = (location.protocol === "https:" ? "wss://" : "ws://") + window.location.host + "/ws/juego/";
        const USERNAME = "{{ user.username }}";
        // Matrix passed from view
        const MY_CARD = JSON.parse('{{ carton_matriz|safe }}'); 
    </script>
    <script src="{% static 'js/juego.js' %}"></script>
</body>
</html>
